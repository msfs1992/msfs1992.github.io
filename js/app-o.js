import Player from"./Player-o.js";class ShooterGame{t;i;o;h;B;m;l;A;ammoPlugin;u;L;N;O;Y;constructor(){this.p()}async p(){await this.v();await this.P()}async R(){var t=BABYLON.Mesh.CreateBox("skyBox",1e3,scene);var s=new BABYLON.StandardMaterial("skyBox",scene);s.backFaceCulling=false;s.reflectionTexture=new BABYLON.CubeTexture("textures/TropicalSunnyDay",scene);s.reflectionTexture.coordinatesMode=BABYLON.Texture.SKYBOX_MODE;s.diffuseColor=new BABYLON.Color3(0,0,0);s.specularColor=new BABYLON.Color3(0,0,0);s.disableLighting=true;t.material=s}async P(){this.i=await new BABYLON.Engine(this.t);this.i.displayLoadingUI();this.o=new BABYLON.Scene(this.i);var t=new BABYLON.HemisphericLight("light1",new BABYLON.Vector3(0,1,0),this.o);t.intensity=.7;await this.k();this.i.runRenderLoop((()=>{this.o.render()}))}async k(){await Ammo().then((t=>{console.log("Ammolib");this.ammoPlugin=new BABYLON.AmmoJSPlugin;window.ammoPlugin=this.ammoPlugin;this.o.enablePhysics(new BABYLON.Vector3(0,-9.81,0),this.ammoPlugin);console.log(this.ammoPlugin);console.log("CREATING PLAYER");this.Y=new Player(this.o,this.t,this.i)}))}async C(){var t=BABYLON.MeshBuilder.CreateGround("ground",{width:16*10,height:16*10},this.o);t.material=new BABYLON.GridMaterial("groundMaterial",this.o);t.physicsImpostor=new BABYLON.PhysicsImpostor(t,BABYLON.PhysicsImpostor.BoxImpostor,{mass:0,restitution:.9},this.o);const s=BABYLON.MeshBuilder.CreateBox("platform1",{width:5,G:5,height:1});s.position.copyFrom(new BABYLON.Vector3(-20,0,20));s.physicsImpostor=new BABYLON.PhysicsImpostor(s,BABYLON.PhysicsImpostor.BoxImpostor,{mass:0,restitution:.1});this.S=BABYLON.MeshBuilder.CreateBox("outer",{width:.4,G:.4,height:2},this.o);this.S.position.copyFrom(new BABYLON.Vector3(0,2,0));this.S.isVisible=false;this.S.isPickable=false;this.S.checkCollisions=true;this.S.physicsImpostor=new BABYLON.PhysicsImpostor(this.S,BABYLON.PhysicsImpostor.BoxImpostor,{mass:80,restitution:0});BABYLON.SceneLoader.ImportMeshAsync(null,"./models/","george8.glb",this.o).then((t=>{console.log("GEORGE");console.log(t.animationGroups);const s=t.meshes[0];const e=s;e.parent=this.S;e.position=new BABYLON.Vector3(0,-1,0);e.isPickable=false;e.getChildMeshes().forEach((t=>{t.isPickable=false}))}));this.u.parent=this.S;let e=this.S.position.x;let i=this.S.position.y;let n=this.S.position.z;console.log(e,i,n);let o=new BABYLON.Vector3(this.S.position.x,this.S.position.y-1,this.S.position.z-3);this.u.position.copyFrom(o);this.u.setTarget(new BABYLON.Vector3(e,i-2,n));this._();this.M()}async T(){let t=80;let s=new Ammo.btCapsuleShape(1,5);let e=new Ammo.btTransform;e.setIdentity();const i=this.S.position;e.setOrigin(new Ammo.btVector3(i.x,i.y,i.z));e.setRotation(new Ammo.btQuaternion(0,0,0,1));const n=new Ammo.btDefaultMotionState(e);const o=new Ammo.btVector3(0,0,0);s.calculateLocalInertia(t,o);const h=new Ammo.btRigidBodyConstructionInfo(t,n,s,o);this.L=new Ammo.btRigidBody(h);this.L.setFriction(4);this.L.j(10);this.A.D(this.L)}async v(){document.documentElement.style["overflow"]="hidden";document.documentElement.style.overflow="hidden";document.documentElement.style.width="100%";document.documentElement.style.height="100%";document.documentElement.style.margin="0";document.documentElement.style.padding="0";document.body.style.overflow="hidden";document.body.style.width="100%";document.body.style.height="100%";document.body.style.margin="0";document.body.style.padding="0";this.t=document.createElement("canvas");this.t.style.width="100%";this.t.style.height="100%";this.t.id="gameCanvas";document.body.appendChild(this.t)}}new ShooterGame;